import{r as u,W as q,j as e,Y as y}from"./app-df5b00d3.js";import{B as F,S}from"./index-2322edcd.js";import{C as k,a as w,b as B,c as h,d as O,e as _}from"./index-748fae91.js";import{A,H as P,T,B as E}from"./AuthLayout-278835ee.js";import{d as H}from"./index.esm-e9b6bcd9.js";import"./moment-a9aaa855.js";const V=({clientes:p,ordem:c,gerais:o})=>{var m,x;const[n,d]=u.useState([]),f=o!=null&&o.equtipo?(m=o==null?void 0:o.equtipo)==null?void 0:m.split(";"):[],j=o!=null&&o.equestado?(x=o==null?void 0:o.equestado)==null?void 0:x.split(";"):[],{data:s,setData:a,post:v,errors:r}=q({id:c>0?c+1:1,cliente_id:"",cliente:"",equipamento:"",modelo:"",senha:"",defeito:"",estado:"",acessorios:"",preorcamento:"",status:!1,previsao:"",obs:""});function b(l){l.preventDefault(),v(route("ordens.store"))}const N=l=>{const t=l.toLowerCase(),i=p.filter(g=>g.nome.toLowerCase().includes(t));d(i)};u.useEffect(()=>{s.cliente===""&&d([])},[s]);const C=(l,t)=>{a(i=>({...i,cliente_id:l})),a(i=>({...i,cliente:t})),d([])};return e.jsxs(A,{children:[e.jsx(y,{title:"Ordens"}),e.jsxs(k,{children:[e.jsxs(P,{children:[e.jsxs(T,{children:[e.jsx(H,{size:30}),e.jsx("span",{className:"ml-2",children:"Ordens"})]}),e.jsx(E,{links:[{url:"/ordens",label:"Ordens"},{url:null,label:"Adicionar ordem"}]})]}),e.jsxs(w,{children:[e.jsxs(B,{children:[e.jsx(h,{children:e.jsx(F,{url:"/ordens",label:"Voltar"})}),e.jsx(h,{children:e.jsx(e.Fragment,{})})]}),e.jsxs("form",{onSubmit:b,autoComplete:"off",children:[e.jsx(O,{className:" border-y border-gray-100",children:e.jsxs("div",{className:"px-3 my-4",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"ordem",children:"Ordem"}),e.jsx("input",{id:"ordem",type:"text",value:s.id,className:"input-form",disabled:!0})]}),e.jsxs("div",{className:"flex flex-col col-span-2 relative",children:[e.jsx("label",{className:"label-form",htmlFor:"cliente",children:"Nome do cliente"}),e.jsx("input",{type:"text",value:s.cliente_id,onChange:l=>a("cliente_id",l.target.value),className:"hidden"}),e.jsx("input",{id:"cliente",type:"text",value:s.cliente,onChange:l=>{a("cliente",l.target.value),N(l.target.value)},className:"input-form"}),n.length>0&&e.jsx("div",{className:"absolute bg-gray-50 border-2 border-white shadow-md w-full rounded-sm top-16 max-h-52 overflow-y-auto",children:e.jsx("ul",{className:"p-1",children:n.map((l,t)=>e.jsx("li",{className:`flex items-center justify-normal ${t<n.length-1?"border-b border-gray-200":""}`,children:e.jsx("div",{className:"text-sm text-gray-600 p-1 cursor-pointer inline-block w-full",onClick:()=>C(l.id,l.nome),children:l.nome})},t))})}),r.cliente_id&&e.jsx("div",{className:"text-sm text-red-500",children:r.cliente_id})]}),e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"equipamento",children:"Tipo de equipamento"}),e.jsxs("select",{id:"equipamento",value:s.equipamento,onChange:l=>a("equipamento",l.target.value),className:"input-form",children:[e.jsx("option",{value:"",children:"Selecione o tipo de equipamento"}),e.jsx("option",{value:"Notebook",children:"Notebook"}),e.jsx("option",{value:"Mobile",children:"Mobile"}),e.jsx("option",{value:"PC",children:"PC"}),f.map((l,t)=>e.jsx("option",{value:l,children:l}))]}),r.equipamento&&e.jsx("div",{className:"text-red-500",children:r.equipamento})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"modelo",children:"Modelo do equipamento"}),e.jsx("input",{id:"modelo",type:"text",value:s.modelo,onChange:l=>a("modelo",l.target.value),className:"input-form"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"senha",children:"Senha do equipamento"}),e.jsx("input",{id:"senha",type:"text",value:s.senha,onChange:l=>a("senha",l.target.value),className:"input-form"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"previsao",children:"Previsão de entrega"}),e.jsx("input",{id:"previsao",type:"date",value:s.previsao,onChange:l=>a("previsao",l.target.value),className:"input-form"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"defeito",children:"Defeito relatado/Serviço solicitado"}),e.jsx("textarea",{id:"defeito",value:s.defeito,onChange:l=>a("defeito",l.target.value),className:"input-form"}),r.defeito&&e.jsx("div",{className:"text-red-500",children:r.defeito})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"estado",children:"Estado do equipamento"}),e.jsxs("select",{id:"estado",value:s.estado,onChange:l=>a("estado",l.target.value),className:"input-form",children:[e.jsx("option",{value:"",children:"Selecione o estado do equipamento"}),j.map((l,t)=>e.jsx("option",{value:l,children:l}))]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"acessorios",children:"Acessórios"}),e.jsx("textarea",{id:"acessorios",value:s.acessorios,onChange:l=>a("acessorios",l.target.value),className:"input-form"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"preorcamento",children:"Pré-orçamento"}),e.jsx("textarea",{id:"preorcamento",value:s.preorcamento,onChange:l=>a("preorcamento",l.target.value),className:"input-form"})]}),e.jsxs("div",{className:"h-full flex items-center justify-center",children:[e.jsx("label",{className:"label-form mr-2",htmlFor:"status",children:"Orçamento aprovado"}),e.jsx("input",{id:"status",type:"checkbox",checked:s.status,onChange:l=>a("status",l.target.checked)})]})]}),e.jsxs("div",{className:"flex flex-col mt-6",children:[e.jsx("label",{className:"label-form",htmlFor:"obs",children:"Observações"}),e.jsx("textarea",{id:"obs",value:s.obs,onChange:l=>a("obs",l.target.value),className:"input-form"})]})]})}),e.jsx(_,{children:e.jsx(S,{})})]})]})]})]})};export{V as default};
